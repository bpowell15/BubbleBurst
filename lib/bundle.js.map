{"version":3,"sources":["webpack:///webpack/bootstrap 4a91578974587631e608","webpack:///./lib/bubble.js","webpack:///./lib/shooter.js","webpack:///./lib/bubbleburst.js","webpack:///./lib/game.js","webpack:///./lib/board.js"],"names":["BUBBLECOLORS","Bubble","x","y","ctx","type","pos","rowshift","color","bubbleColor","pickBubbleColor","bubbleRadius","r","c","angle","speed","rowShift","Math","floor","random","length","beginPath","arc","PI","fillStyle","fill","strokeStyle","lineWidth","stroke","Shooter","canvas","loadedBubbles","height","width","loadBubbles","push","radAngle","degToRad","centerx","centery","moveTo","lineTo","cos","sin","drawBubble","document","addEventListener","canvasEl","getElementById","getContext","game","drawGame","Game","board","shooter","onMouseMove","bind","findCluster","handleClick","handleStartClick","handleGameOverClick","handleAudioClick","handleFXClick","clicks","lost","score","highscore","Number","localStorage","getItem","finishedShots","floats","cluster","shotBubble","seen","pop","play","won","sound","soundFX","start","clearRect","drawBoard","drawShooter","drawLoadedBubbles","soundToggle","fxToggle","getHighScore","rect","font","fillText","addRow","forEach","bubble","setTimeout","i","moveShotBubble","collisions","bubbleCollision","closestBubble","closestCollision","possibilities","availableSpaces","closestAvailableSpace","findFloaters","pic","Image","src","gameOver","closePath","drawImage","requestAnimationFrame","bubbles","type1Bubbles","e","neighbors","neighborMatch","neighbor","undefined","topRow","allNeighbors","queue","bubb","shift","findNeighbors","includes","removeCluster","reload","audio","Audio","volume","setItem","emptyTileCount","xDistAbs","abs","closestDist","colBubble","right","bottomLeft","left","bottomRight","realPossibilities","poss","possSpace","xDist","yDist","dist","bubbleRow","unshift","nextRow","colShift","loadNextRow","slice","getBoundingClientRect","round","clientX","clientY","top","bottom","getMousePos","mouseangle","radToDeg","atan2","lbound","ubound","pauseAudio","playAudio","className","pause","BOARDOPTIONS","bubbleWidth","bubbleHeight","offsetTop","rowCount","nullRowCount","columnCount","Board","createBubbles","bubbleX","bubbleY"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;AC7DA,IAAMA,eAAe,CACnB,SADmB,EAEnB,SAFmB,EAGnB,SAHmB,EAInB,SAJmB,EAKnB,SALmB,EAMnB,SANmB,CAArB;;IASMC,M;AACJ,kBAAYC,CAAZ,EAAeC,CAAf,EAAkBC,GAAlB,EAAuBC,IAAvB,EAA6BC,GAA7B,EAAwD;AAAA,QAAtBC,QAAsB,uEAAb,KAAa;AAAA,QAANC,KAAM;;AAAA;;AACtD,SAAKC,WAAL,GAAmBD,SAAS,KAAKE,eAAL,EAA5B;AACA,SAAKC,YAAL,GAAoB,EAApB;AACA,SAAKP,GAAL,GAAWA,GAAX;AACA,SAAKF,CAAL,GAASA,CAAT;AACA,SAAKC,CAAL,GAASA,CAAT;AACA,SAAKG,GAAL,GAAUA,OAAO,EAACM,GAAG,IAAJ,EAAUC,GAAG,IAAb,EAAjB;AACA,SAAKC,KAAL,GAAa,EAAb;AACA,SAAKT,IAAL,GAAYA,IAAZ;AACA,SAAKU,KAAL,GAAa,EAAb;AACA,SAAKC,QAAL,GAAgBT,QAAhB;AACD;;;;sCAEgB;AACf,aAAOP,aAAaiB,KAAKC,KAAL,CAAWD,KAAKE,MAAL,KAAgBnB,aAAaoB,MAAxC,CAAb,CAAP;AACD;;;iCAEW;AACV,UAAI,KAAKf,IAAL,KAAc,CAAlB,EAAqB;AACnB,aAAKD,GAAL,CAASiB,SAAT;AACA,aAAKjB,GAAL,CAASkB,GAAT,CAAa,KAAKpB,CAAlB,EAAqB,KAAKC,CAA1B,EAA6B,KAAKQ,YAAlC,EAAgD,CAAhD,EAAmDM,KAAKM,EAAL,GAAQ,CAA3D;AACA,aAAKnB,GAAL,CAASoB,SAAT,GAAqB,KAAKf,WAA1B;AACA,aAAKL,GAAL,CAASqB,IAAT;AACA,aAAKrB,GAAL,CAASsB,WAAT,GAAuB,SAAvB;AACA,aAAKtB,GAAL,CAASuB,SAAT,GAAmB,CAAnB;AACA,aAAKvB,GAAL,CAASwB,MAAT;AACA,aAAKxB,GAAL,CAASiB,SAAT;AACA,aAAKjB,GAAL,CAASkB,GAAT,CAAa,KAAKpB,CAAL,GAAS,CAAtB,EAAyB,KAAKC,CAAL,GAAS,CAAlC,EAAqC,CAArC,EAAwC,CAAxC,EAA2C,IAAEc,KAAKM,EAAlD;AACA,aAAKnB,GAAL,CAASoB,SAAT,GAAqB,yBAArB;AACA,aAAKpB,GAAL,CAASqB,IAAT;AACA,aAAKrB,GAAL,CAASiB,SAAT;AACA,aAAKjB,GAAL,CAASkB,GAAT,CAAa,KAAKpB,CAAL,GAAS,CAAtB,EAAyB,KAAKC,CAAL,GAAS,CAAlC,EAAqC,CAArC,EAAwC,CAAxC,EAA2C,IAAEc,KAAKM,EAAlD;AACA,aAAKnB,GAAL,CAASoB,SAAT,GAAqB,yBAArB;AACA,aAAKpB,GAAL,CAASqB,IAAT;AACA,aAAKrB,GAAL,CAASiB,SAAT;AACA,aAAKjB,GAAL,CAASkB,GAAT,CAAa,KAAKpB,CAAL,GAAS,CAAtB,EAAyB,KAAKC,CAAL,GAAS,CAAlC,EAAqC,CAArC,EAAwC,CAAxC,EAA2C,IAAEc,KAAKM,EAAlD;AACA,aAAKnB,GAAL,CAASoB,SAAT,GAAqB,yBAArB;AACA,aAAKpB,GAAL,CAASqB,IAAT;AACA,aAAKrB,GAAL,CAASiB,SAAT;AACA,aAAKjB,GAAL,CAASkB,GAAT,CAAa,KAAKpB,CAAL,GAAS,CAAtB,EAAyB,KAAKC,CAAL,GAAS,CAAlC,EAAqC,CAArC,EAAwC,CAAxC,EAA2C,IAAEc,KAAKM,EAAlD;AACA,aAAKnB,GAAL,CAASoB,SAAT,GAAqB,yBAArB;AACA,aAAKpB,GAAL,CAASqB,IAAT;AAED;AACF;;;;;;kBAIYxB,M;;;;;;;;;;;;;;;AC1Df;;;;;;;;IAEM4B,O;AACJ,mBAAYC,MAAZ,EAAoB1B,GAApB,EAAyBU,KAAzB,EAA+B;AAAA;;AAC7B,SAAKiB,aAAL,GAAqB,EAArB;AACA,SAAKD,MAAL,GAAcA,MAAd;AACA,SAAK1B,GAAL,GAAWA,GAAX;AACA,SAAK4B,MAAL,GAAc,EAAd;AACA,SAAKC,KAAL,GAAa,CAAb;AACA,SAAKC,WAAL;AACD;;;;6BAEQpB,K,EAAO;AACZ,aAAOA,SAASG,KAAKM,EAAL,GAAU,GAAnB,CAAP;AACH;;;kCAEY;AACX,UAAI,KAAKQ,aAAL,CAAmBX,MAAnB,KAA8B,CAAlC,EAAqC;AACnC,YAAI,KAAKW,aAAL,CAAmBX,MAAnB,KAA8B,CAAlC,EAAqC;AACnC,eAAKW,aAAL,CAAmBI,IAAnB,CAAwB,qBAAW,KAAKL,MAAL,CAAYG,KAAZ,GAAkB,CAAlB,GAAsB,CAAjC,EAAmC,KAAKH,MAAL,CAAYE,MAAZ,GAAqB,EAAxD,EAA4D,KAAK5B,GAAjE,EAAsE,CAAtE,CAAxB;AACD,SAFD,MAEO;AACL,eAAK2B,aAAL,CAAmBI,IAAnB,CAAwB,qBAAW,KAAKL,MAAL,CAAYG,KAAZ,GAAkB,CAAlB,GAAsB,EAAjC,EAAqC,KAAKH,MAAL,CAAYE,MAAZ,GAAqB,EAA1D,EAA8D,KAAK5B,GAAnE,EAAwE,CAAxE,CAAxB;AACD;AACD,aAAK8B,WAAL;AACD;AACF;;;gCAIWpB,K,EAAM;AAChB,UAAIsB,WAAW,KAAKC,QAAL,CAAcvB,KAAd,CAAf;AACA,UAAIwB,UAAU,KAAKR,MAAL,CAAYG,KAAZ,GAAkB,CAAhC;AACA,UAAIM,UAAU,KAAKT,MAAL,CAAYE,MAAZ,GAAqB,EAAnC;AACA,WAAK5B,GAAL,CAASuB,SAAT,GAAqB,CAArB;AACA,WAAKvB,GAAL,CAASsB,WAAT,GAAuB,SAAvB;AACA,WAAKtB,GAAL,CAASiB,SAAT;AACA,WAAKjB,GAAL,CAASoC,MAAT,CAAgBF,OAAhB,EAAyBC,OAAzB;AACA,WAAKnC,GAAL,CAASqC,MAAT,CAAgBH,UAAU,KAAKrB,KAAKyB,GAAL,CAASN,QAAT,CAA/B,EAAmDG,UAAU,KAAKtB,KAAK0B,GAAL,CAASP,QAAT,CAAlE;AACA,WAAKhC,GAAL,CAASwB,MAAT;AACD;;;wCAEkB;AACjB,UAAI,KAAKG,aAAL,CAAmBX,MAAnB,GAA4B,CAAhC,EAAmC;AACjC,aAAKW,aAAL,CAAmB,CAAnB,EAAsBa,UAAtB;AACD,OAFD,MAEO;AACL,aAAKb,aAAL,CAAmB,CAAnB,EAAsBa,UAAtB;AACA,aAAKb,aAAL,CAAmB,CAAnB,EAAsBa,UAAtB;AACD;AACF;;;;;;kBAGYf,O;;;;;;;;;ACjDf;;;;AACA;;;;;;AAHA;AACA;AAKAgB,SAASC,gBAAT,CAA0B,kBAA1B,EAA8C,YAAM;AAClD,MAAMC,WAAWF,SAASG,cAAT,CAAwB,mBAAxB,CAAjB;AACA,MAAM5C,MAAM2C,SAASE,UAAT,CAAoB,IAApB,CAAZ;AACA,MAAIC,OAAO,mBAASH,QAAT,EAAmB3C,GAAnB,CAAX;AACA8C,OAAKC,QAAL;AACD,CALD,E;;;;;;;;;;;;;;;ACNA;;;;AACA;;;;AACA;;;;;;;;IACMC,I;AACJ,gBAAYtB,MAAZ,EAAoB1B,GAApB,EAAwB;AAAA;;AACtB,SAAK0B,MAAL,GAAcA,MAAd;AACA,SAAK1B,GAAL,GAAWA,GAAX;AACA,SAAKiD,KAAL,GAAa,oBAAUvB,MAAV,EAAkB1B,GAAlB,CAAb;AACA,SAAKkD,OAAL,GAAe,sBAAYxB,MAAZ,EAAoB1B,GAApB,CAAf;AACA,SAAKU,KAAL,GAAa,EAAb;AACA,SAAKyC,WAAL,GAAmB,KAAKA,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBD,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKE,WAAL,GAAmB,KAAKA,WAAL,CAAiBF,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKG,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBH,IAAtB,CAA2B,IAA3B,CAAxB;AACA,SAAKI,mBAAL,GAA2B,KAAKA,mBAAL,CAAyBJ,IAAzB,CAA8B,IAA9B,CAA3B;AACA,SAAKK,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBL,IAAtB,CAA2B,IAA3B,CAAxB;AACA,SAAKM,aAAL,GAAqB,KAAKA,aAAL,CAAmBN,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKO,MAAL,GAAc,CAAd;AACA,SAAKC,IAAL,GAAY,KAAZ;AACA,SAAKC,KAAL,GAAa,CAAb;AACA,SAAKC,SAAL,GAAiBC,OAAOC,aAAaC,OAAb,CAAqB,WAArB,CAAP,CAAjB;AACA,SAAKC,aAAL,GAAqB,EAArB;AACA,SAAKC,MAAL,GAAc,EAAd;AACA,SAAKC,OAAL,GAAe,EAAf;AACA,SAAKC,UAAL,GAAkB,IAAlB;AACA,SAAKC,IAAL,GAAY,EAAZ;AACA,SAAKC,GAAL,GAAW,KAAX;AACA,SAAKC,IAAL,GAAY,IAAZ;AACA,SAAKC,GAAL,GAAW,KAAX;AACA,SAAKC,KAAL,GAAa,KAAb;AACA,SAAKC,OAAL,GAAe,IAAf;AACA,SAAKC,KAAL,GAAa,KAAb;AACD;;;;+BAGS;AAAA;;AACR,WAAKlD,MAAL,CAAYgB,gBAAZ,CAA6B,WAA7B,EAA0C,KAAKS,WAA/C;AACA,UAAI,KAAKyB,KAAT,EAAe;AACb,aAAKlD,MAAL,CAAYgB,gBAAZ,CAA6B,OAA7B,EAAsC,KAAKY,WAA3C;AACD;AACD,WAAKtD,GAAL,CAAS6E,SAAT,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,KAAKnD,MAAL,CAAYG,KAArC,EAA4C,KAAKH,MAAL,CAAYE,MAAxD;AACA,WAAKqB,KAAL,CAAW6B,SAAX;AACA,WAAK5B,OAAL,CAAa6B,WAAb,CAAyB,KAAKrE,KAA9B;AACA,WAAKwC,OAAL,CAAa8B,iBAAb;AACA,UAAMC,cAAcxC,SAASG,cAAT,CAAwB,aAAxB,CAApB;AACA,UAAMsC,WAAWzC,SAASG,cAAT,CAAwB,UAAxB,CAAjB;AACAqC,kBAAYvC,gBAAZ,CAA6B,OAA7B,EAAsC,KAAKe,gBAA3C;AACAyB,eAASxC,gBAAT,CAA0B,OAA1B,EAAmC,KAAKgB,aAAxC;AACA,WAAKyB,YAAL;;AAGA,WAAKzD,MAAL,CAAYgB,gBAAZ,CAA6B,OAA7B,EAAsC,KAAKa,gBAA3C;AACF,UAAI,CAAC,KAAKqB,KAAV,EAAiB;AACX,aAAK5E,GAAL,CAASiB,SAAT;AACA,aAAKjB,GAAL,CAASoF,IAAT,CAAc,CAAd,EAAiB,CAAjB,EAAoB,GAApB,EAAyB,GAAzB;AACA,aAAKpF,GAAL,CAASoB,SAAT,GAAqB,mBAArB;AACA,aAAKpB,GAAL,CAASqB,IAAT;AACA,aAAKrB,GAAL,CAASqF,IAAT,GAAgB,cAAhB;AACA,aAAKrF,GAAL,CAASoB,SAAT,GAAqB,SAArB;AACA,aAAKpB,GAAL,CAASsF,QAAT,CAAkB,gBAAlB,EAAmC,KAAK5D,MAAL,CAAYG,KAAZ,GAAkB,CAArD,EAAyD,KAAKH,MAAL,CAAYE,MAAZ,GAAmB,CAA5E;AACD;AACD,WAAK5B,GAAL,CAASqF,IAAT,GAAgB,cAAhB;AACA,WAAKrF,GAAL,CAASoB,SAAT,GAAqB,SAArB;AACA,WAAKpB,GAAL,CAASsF,QAAT,iBAAgC,KAAKxB,SAArC,EAAkD,EAAlD,EAAqD,KAAKpC,MAAL,CAAYE,MAAZ,GAAmB,CAAxE;;AAEF,UAAI,KAAK+B,MAAL,KAAgB,EAApB,EAAwB;AACtB,aAAK4B,MAAL;AACD;;AAED,UAAI,KAAKnB,OAAL,CAAapD,MAAb,GAAsB,CAA1B,EAA4B;AAC1B,aAAKoD,OAAL,CAAaoB,OAAb,CAAqB,UAACC,MAAD,EAAU;AAC7BA,iBAAOlF,YAAP,IAAuB,IAAvB;AACAkF,iBAAOjD,UAAP;AACD,SAHD;AAIAkD,mBAAW,YAAI;AAAC,gBAAKtB,OAAL,GAAe,EAAf;AAAmB,SAAnC,EAAqC,GAArC;AACD;;AAED,UAAI,KAAKD,MAAL,CAAYnD,MAAZ,GAAqB,CAAzB,EAA4B;AAC1B,aAAK,IAAI2E,IAAI,CAAb,EAAgBA,IAAI,KAAKxB,MAAL,CAAYnD,MAAhC,EAAwC2E,GAAxC,EAA6C;AAC3C,eAAKxB,MAAL,CAAYwB,CAAZ,EAAe5F,CAAf,IAAoB,EAApB;AACA,eAAKoE,MAAL,CAAYwB,CAAZ,EAAe1F,IAAf,GAAsB,CAAtB;AACA,eAAKkE,MAAL,CAAYwB,CAAZ,EAAenD,UAAf;AACD;AACDkD,mBAAW,YAAI;AAAC,gBAAKvB,MAAL,GAAa,EAAb;AAAiB,SAAjC,EAAmC,IAAnC;AACD;;AAED,WAAKnE,GAAL,CAASqF,IAAT,GAAgB,cAAhB;AACA,WAAKrF,GAAL,CAASoB,SAAT,GAAqB,SAArB;AACA,WAAKpB,GAAL,CAASsF,QAAT,aAA4B,KAAKzB,KAAjC,EAAyC,KAAKnC,MAAL,CAAYG,KAAZ,GAAoB,GAA7D,EAAiE,KAAKH,MAAL,CAAYE,MAAZ,GAAmB,CAApF;;AAEA,UAAI,KAAKyC,UAAT,EAAqB;AACnB,aAAKuB,cAAL,CAAoB,KAAKvB,UAAzB;AACA,aAAK3C,MAAL,CAAYgB,gBAAZ,CAA6B,OAA7B,EAAsC,KAAKc,mBAA3C;AACA,aAAKa,UAAL,CAAgB7B,UAAhB;AACA,YAAIqD,aAAa,KAAKC,eAAL,CAAqB,KAAKzB,UAA1B,CAAjB;AACA,YAAIwB,WAAW7E,MAAX,GAAoB,CAAxB,EAA2B;AACzB,cAAI+E,gBAAgB,KAAKC,gBAAL,CAAsBH,UAAtB,CAApB;AACA,cAAII,gBAAgB,KAAKC,eAAL,CAAqBH,aAArB,CAApB;AACA,eAAKI,qBAAL,CAA2B,KAAK9B,UAAhC,EAA4C4B,aAA5C;AACA,eAAK5B,UAAL,CAAgB7B,UAAhB;AACA,eAAKa,WAAL,CAAiB,KAAKgB,UAAtB;AACA,eAAK+B,YAAL;AACD;AACF;;AAID,UAAMC,MAAM,IAAIC,KAAJ,EAAZ;AACAD,UAAIE,GAAJ,GAAU,uBAAV;AACA,WAAKC,QAAL;AACA,UAAI,KAAK5C,IAAL,IAAa,KAAKa,GAAtB,EAA2B;;AAEzB,aAAKzE,GAAL,CAASiB,SAAT;AACA,aAAKjB,GAAL,CAASoF,IAAT,CAAc,CAAd,EAAiB,CAAjB,EAAoB,GAApB,EAAyB,GAAzB;AACA,aAAKpF,GAAL,CAASoB,SAAT,GAAqB,mBAArB;AACA,aAAKpB,GAAL,CAASqB,IAAT;AACA,aAAKrB,GAAL,CAASyG,SAAT;AACA,aAAKzG,GAAL,CAAS0G,SAAT,CAAmBL,GAAnB,EAAwB,KAAK3E,MAAL,CAAYG,KAAZ,GAAkB,CAA1C,EAA6C,KAAKH,MAAL,CAAYE,MAAZ,GAAmB,CAAhE,EAAmE,GAAnE,EAAwE,EAAxE;;AAEA,YAAI,KAAK6C,GAAT,EAAa;AACX,eAAKzE,GAAL,CAASoB,SAAT,GAAqB,SAArB;AACA,eAAKpB,GAAL,CAASqF,IAAT,GAAgB,eAAhB;AACA,eAAKrF,GAAL,CAASsF,QAAT,aAA8B,KAAK5D,MAAL,CAAYG,KAAZ,GAAkB,CAAlB,GAAsB,EAApD,EAAwD,KAAKH,MAAL,CAAYE,MAAZ,GAAmB,CAAnB,GAAuB,EAA/E;AACD;;AAED,aAAK5B,GAAL,CAASqF,IAAT,GAAgB,cAAhB;AACA,aAAKrF,GAAL,CAASoB,SAAT,GAAqB,SAArB;AACA,aAAKpB,GAAL,CAASsF,QAAT,aAA4B,KAAKzB,KAAjC,EAAyC,KAAKnC,MAAL,CAAYG,KAAZ,GAAoB,GAA7D,EAAiE,KAAKH,MAAL,CAAYE,MAAZ,GAAmB,CAApF;AACA,aAAK5B,GAAL,CAASqF,IAAT,GAAgB,cAAhB;AACA,aAAKrF,GAAL,CAASoB,SAAT,GAAqB,SAArB;AACA,aAAKpB,GAAL,CAASsF,QAAT,CAAkB,qBAAlB,EAAwC,KAAK5D,MAAL,CAAYG,KAAZ,GAAkB,CAA1D,EAA6D,KAAKH,MAAL,CAAYE,MAAZ,GAAmB,CAAhF;AACA+E,8BAAsB,KAAK5D,QAAL,CAAcK,IAAd,CAAmB,IAAnB,CAAtB;AACD,OAtBD,MAsBO;AACLuD,8BAAsB,KAAK5D,QAAL,CAAcK,IAAd,CAAmB,IAAnB,CAAtB;AACD;AACF;;;+BAES;AAAA;;AACR,WAAKH,KAAL,CAAW2D,OAAX,CAAmB,EAAnB,EAAuBpB,OAAvB,CAA+B,UAACC,MAAD,EAAY;AACzC,YAAIA,OAAOxF,IAAP,KAAgB,CAApB,EAAuB;AACrB,iBAAK2D,IAAL,GAAY,IAAZ;AACA,iBAAKY,IAAL,GAAY,KAAZ;AACD;AACF,OALD;AAMA,UAAIqC,eAAe,EAAnB;AACA,WAAK5D,KAAL,CAAW2D,OAAX,CAAmB,CAAnB,EAAsBpB,OAAtB,CAA8B,UAACC,MAAD,EAAY;AACxC,YAAIA,OAAOxF,IAAP,KAAgB,CAApB,EAAwB;AACtB4G,uBAAa9E,IAAb,CAAkB0D,MAAlB;AACD;AACF,OAJD;;AAMA,UAAKoB,aAAa7F,MAAb,KAAwB,CAA7B,EAAgC;AAC9B,aAAKyD,GAAL,GAAW,IAAX;AACD;AAEF;;;qCAEgBqC,C,EAAE;AACjB,UAAI,KAAKlC,KAAL,KAAe,KAAnB,EAAyB;AACvB,aAAKA,KAAL,GAAa,IAAb;AACD;AACF;;;gCAEU;AACT,WAAKL,GAAL,GAAW,KAAX;AACD;;;6BACO;AACN,WAAKrB,OAAL,CAAapB,WAAb;AACA,WAAKoB,OAAL,CAAavB,aAAb,CAA2B,CAA3B,EAA8B7B,CAA9B,GAAkC,KAAK4B,MAAL,CAAYG,KAAZ,GAAoB,CAAtD;AACA,WAAKqB,OAAL,CAAavB,aAAb,CAA2B,CAA3B,EAA8B5B,CAA9B,GAAkC,KAAK2B,MAAL,CAAYE,MAAZ,GAAqB,EAAvD;AACA,WAAKsB,OAAL,CAAa8B,iBAAb;AACD;;;kCAEaS,M,EAAO;AAAA;;AACnB,UAAIsB,kBAAJ;AACA,UAAM9D,QAAO,KAAKA,KAAL,CAAW2D,OAAxB;AACA,UAAMpG,IAAIiF,OAAOvF,GAAP,CAAWM,CAArB;AACA,UAAMC,IAAIgF,OAAOvF,GAAP,CAAWO,CAArB;;AAEA,UAAIgF,OAAO7E,QAAP,KAAoB,IAAxB,EAA8B;AAC5B,YAAIH,IAAI,CAAJ,GAAQ,CAAR,IAAaD,IAAG,CAAH,GAAO,CAAxB,EAA0B;AACxBuG,sBAAY,CAAC9D,MAAMzC,IAAE,CAAR,EAAWC,CAAX,CAAD,EACCwC,MAAMzC,IAAE,CAAR,EAAWC,IAAE,CAAb,CADD,CAAZ;AAED,SAHD,MAGO,IAAKA,IAAI,CAAJ,GAAQ,EAAR,IAAcD,IAAI,CAAJ,GAAQ,CAA3B,EAA+B;AACpCuG,sBAAY,CAAC9D,MAAMzC,CAAN,EAASC,IAAE,CAAX,CAAD,EACCwC,MAAMzC,IAAE,CAAR,EAAWC,CAAX,CADD,CAAZ;AAED,SAHM,MAGA,IAAGA,IAAI,CAAJ,GAAQ,EAAX,EAAc;AACnBsG,sBAAY,CAAC9D,MAAMzC,CAAN,EAASC,IAAE,CAAX,CAAD,EACCwC,MAAMzC,IAAE,CAAR,EAAWC,CAAX,CADD,EAECwC,MAAMzC,IAAE,CAAR,EAAWC,CAAX,CAFD,CAAZ;AAGD,SAJM,MAID,IAAID,IAAI,CAAJ,GAAQ,CAAZ,EAAe;AACnBuG,sBAAY,CAAC9D,MAAMzC,CAAN,EAASC,IAAE,CAAX,CAAD,EACCwC,MAAMzC,CAAN,EAASC,IAAE,CAAX,CADD,EAECwC,MAAMzC,IAAE,CAAR,EAAWC,CAAX,CAFD,EAGCwC,MAAMzC,IAAE,CAAR,EAAWC,IAAE,CAAb,CAHD,CAAZ;AAID,SALK,MAKC,IAAIA,IAAI,CAAJ,GAAQ,CAAZ,EAAe;AACpBsG,sBAAY,CAAC9D,MAAMzC,CAAN,EAASC,IAAE,CAAX,CAAD,EACCwC,MAAMzC,IAAE,CAAR,EAAWC,CAAX,CADD,EAECwC,MAAMzC,IAAE,CAAR,EAAWC,IAAE,CAAb,CAFD,EAGCwC,MAAMzC,IAAE,CAAR,EAAWC,CAAX,CAHD,EAICwC,MAAMzC,IAAE,CAAR,EAAWC,IAAE,CAAb,CAJD,CAAZ;AAKD,SANM,MAMD;AACJsG,sBAAY,CAAC9D,MAAMzC,CAAN,EAASC,IAAE,CAAX,CAAD,EACAwC,MAAMzC,CAAN,EAASC,IAAE,CAAX,CADA,EAEAwC,MAAMzC,IAAE,CAAR,EAAWC,CAAX,CAFA,EAGAwC,MAAMzC,IAAE,CAAR,EAAWC,IAAE,CAAb,CAHA,EAIAwC,MAAMzC,IAAE,CAAR,EAAWC,CAAX,CAJA,EAKAwC,MAAMzC,IAAE,CAAR,EAAWC,IAAE,CAAb,CALA,CAAZ;AAMY;AACf,OA9BD,MA8BO;AACL,YAAKA,IAAI,CAAJ,GAAQ,EAAR,IAAcD,IAAI,CAAJ,GAAQ,CAA3B,EAA+B;AAC7BuG,sBAAY,CACC9D,MAAMzC,CAAN,EAASC,IAAE,CAAX,CADD,EAECwC,MAAMzC,IAAE,CAAR,EAAWC,CAAX,CAFD,EAGCwC,MAAMzC,IAAE,CAAR,EAAWC,IAAE,CAAb,CAHD,CAAZ;AAID,SALD,MAKO,IAAIA,IAAI,CAAJ,GAAQ,CAAR,IAAaD,IAAG,CAAH,GAAO,CAAxB,EAA2B;AAChCuG,sBAAY,CAAC9D,MAAMzC,CAAN,EAASC,IAAE,CAAX,CAAD,EACCwC,MAAMzC,CAAN,EAASC,IAAE,CAAX,CADD,EAECwC,MAAMzC,IAAE,CAAR,EAAWC,CAAX,CAFD,CAAZ;AAGD,SAJM,MAIA,IAAIA,IAAI,CAAJ,GAAQ,EAAZ,EAAe;AACpBsG,sBAAY,CAAC9D,MAAMzC,CAAN,EAASC,IAAE,CAAX,CAAD,EACCwC,MAAMzC,IAAE,CAAR,EAAWC,CAAX,CADD,EAECwC,MAAMzC,IAAE,CAAR,EAAWC,IAAE,CAAb,CAFD,EAGCwC,MAAMzC,IAAE,CAAR,EAAWC,CAAX,CAHD,EAICwC,MAAMzC,IAAE,CAAR,EAAWC,IAAE,CAAb,CAJD,CAAZ;AAKD,SANM,MAMA,IAAIA,IAAI,CAAJ,GAAQ,CAAZ,EAAe;AACpBsG,sBAAY,CAAC9D,MAAMzC,CAAN,EAASC,IAAE,CAAX,CAAD,EACCwC,MAAMzC,IAAE,CAAR,EAAWC,CAAX,CADD,EAECwC,MAAMzC,IAAE,CAAR,EAAWC,CAAX,CAFD,CAAZ;AAKD,SANM,MAMA,IAAID,IAAI,CAAJ,GAAQ,CAAZ,EAAc;AACnBuG,sBAAY,CAAC9D,MAAMzC,CAAN,EAASC,IAAE,CAAX,CAAD,EACCwC,MAAMzC,CAAN,EAASC,IAAE,CAAX,CADD,EAECwC,MAAMzC,IAAE,CAAR,EAAWC,CAAX,CAFD,EAGCwC,MAAMzC,IAAE,CAAR,EAAWC,IAAE,CAAb,CAHD,CAAZ;AAID,SALM,MAKD;AACNsG,sBAAY,CAAC9D,MAAMzC,CAAN,EAASC,IAAE,CAAX,CAAD,EACCwC,MAAMzC,CAAN,EAASC,IAAE,CAAX,CADD,EAECwC,MAAMzC,IAAE,CAAR,EAAWC,CAAX,CAFD,EAGCwC,MAAMzC,IAAE,CAAR,EAAWC,IAAE,CAAb,CAHD,EAICwC,MAAMzC,IAAE,CAAR,EAAWC,CAAX,CAJD,EAKCwC,MAAMzC,IAAE,CAAR,EAAWC,IAAE,CAAb,CALD,CAAZ;AAMY;AACb;AACD,UAAIuG,gBAAgB,EAApB;AACAD,gBAAUvB,OAAV,CAAkB,UAACyB,QAAD,EAAY;AAC5B,YAAI,OAAK5C,UAAL,KAAoB,IAApB,IAA4B4C,aAAaC,SAAzC,IAAsDD,SAAShH,IAAT,KAAkB,CAA5E,EAA+E;;AAE7E+G,wBAAcjF,IAAd,CAAmBkF,QAAnB;AACD,SAHD,MAGO,IAAIA,aAAaC,SAAb,IACPD,SAAShH,IAAT,KAAkB,CADX,IAEPgH,SAAS5G,WAAT,KAAyB,OAAKgE,UAAL,CAAgBhE,WAFtC,EAEkD;AACnD2G,wBAAcjF,IAAd,CAAmBkF,QAAnB;AACD;AACN,OATD;AAUA,aAAOD,aAAP;AACD;;;mCAEa;AAAA;;AACZ,UAAMG,SAAS,KAAKlE,KAAL,CAAW2D,OAAX,CAAmB,CAAnB,CAAf;AACA,UAAIQ,eAAe,EAAnB;AACA,UAAI9C,OAAO,EAAX;;AAHY,iCAIH7D,EAJG;AAKV,YAAI4G,QAAQ,CAACF,OAAO1G,EAAP,CAAD,CAAZ;AACA,eAAO4G,MAAMrG,MAAN,GAAe,CAAtB,EAAyB;;AAErB,cAAIsG,OAAOD,MAAME,KAAN,EAAX;AACA,cAAID,KAAKrH,IAAL,KAAc,CAAlB,EAAqB;AACrBqE,iBAAKvC,IAAL,CAAUuF,IAAV;AACAF,yBAAarF,IAAb,CAAkBuF,IAAlB;AACA,gBAAIP,YAAY,OAAKS,aAAL,CAAmBF,IAAnB,CAAhB;AACAP,sBAAUvB,OAAV,CAAkB,UAACyB,QAAD,EAAY;AAC5B,kBAAI3C,KAAKmD,QAAL,CAAcR,QAAd,MAA4B,KAAhC,EAAuC;AACrC3C,qBAAKvC,IAAL,CAAUkF,QAAV;AACAG,6BAAarF,IAAb,CAAkBkF,QAAlB;AACAI,sBAAMtF,IAAN,CAAWkF,QAAX;AACD;AACF,aAND;AAOD;AACF;AArBS;;AAIZ,WAAK,IAAIxG,KAAI,CAAb,EAAgBA,KAAI0G,OAAOnG,MAA3B,EAAmCP,IAAnC,EAAwC;AAAA,cAA/BA,EAA+B;AAkBvC;AACD,UAAI0D,SAAS,EAAb;AACA,WAAK,IAAI3D,IAAI,CAAb,EAAgBA,IAAI,KAAKyC,KAAL,CAAW2D,OAAX,CAAmB5F,MAAvC,EAA+CR,GAA/C,EAAoD;AAClD,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKwC,KAAL,CAAW2D,OAAX,CAAmBpG,CAAnB,EAAsBQ,MAA1C,EAAkDP,GAAlD,EAAuD;AACrD,cAAI2G,aAAaK,QAAb,CAAsB,KAAKxE,KAAL,CAAW2D,OAAX,CAAmBpG,CAAnB,EAAsBC,CAAtB,CAAtB,MAAoD,KAAxD,EAA8D;AAC5D,gBAAK,KAAKwC,KAAL,CAAW2D,OAAX,CAAmBpG,CAAnB,EAAsBC,CAAtB,EAAyBR,IAAzB,KAAkC,CAAvC,EACAkE,OAAOpC,IAAP,CAAY,KAAKkB,KAAL,CAAW2D,OAAX,CAAmBpG,CAAnB,EAAsBC,CAAtB,CAAZ;AACD;AACF;AACF;;AAED0D,aAAOqB,OAAP,CAAe,UAACC,MAAD,EAAU;AACvB,YAAI6B,OAAO,qBAAW7B,OAAO3F,CAAlB,EAAqB2F,OAAO1F,CAA5B,EAA+B,OAAKC,GAApC,EAAyC,CAAzC,EAA4C,EAACQ,GAAG,IAAJ,EAAUC,GAAG,IAAb,EAA5C,EAAgEgF,OAAO7E,QAAvE,EAAiF6E,OAAOpF,WAAxF,CAAX;AACA,eAAK8D,MAAL,CAAYpC,IAAZ,CAAiBuF,IAAjB;AACA7B,eAAOxF,IAAP,GAAc,CAAd;AACD,OAJD;AAMD;;;gCAGWwF,M,EAAO;AACjB,UAAI4B,QAAQ,CAAC5B,MAAD,CAAZ;AACA,UAAIrB,UAAU,EAAd;AACA,UAAIE,OAAO,EAAX;AACA,aAAO+C,MAAMrG,MAAN,GAAe,CAAtB,EAAyB;AACvB,YAAIsG,OAAOD,MAAME,KAAN,EAAX;AACAnD,gBAAQrC,IAAR,CAAauF,IAAb;AACAhD,aAAKvC,IAAL,CAAUuF,IAAV;AACA,YAAIP,YAAY,KAAKS,aAAL,CAAmBF,IAAnB,CAAhB;AACAP,kBAAUvB,OAAV,CAAkB,UAACyB,QAAD,EAAY;AAC5B,cACE3C,KAAKmD,QAAL,CAAcR,QAAd,MAA4B,KAD9B,EAEK;AACAI,kBAAMtF,IAAN,CAAWkF,QAAX;AACD;AACD3C,eAAKvC,IAAL,CAAUkF,QAAV;AACJ,SAPD;AAQD;;AAED,UAAI7C,QAAQpD,MAAR,IAAkB,CAAtB,EAAwB;AACtB,aAAK6C,KAAL,IAAcO,QAAQpD,MAAR,GAAiB,GAA/B;AACA,aAAK0G,aAAL,CAAmBtD,OAAnB;AACA,YAAI,KAAKT,MAAL,IAAe,CAAnB,EAAsB;AACpB,eAAKA,MAAL,IAAe,CAAf;AACD;AACF;AACC,WAAKU,UAAL,GAAkB,IAAlB;AACA,WAAKsD,MAAL;AACH;;;kCAGavD,O,EAAQ;AAAA;;AACpBA,cAAQoB,OAAR,CAAgB,UAACC,MAAD,EAAW;AACzB,YAAIA,OAAOxF,IAAP,KAAgB,CAApB,EAAsB;AACtB,cAAIqH,OAAO,qBAAW7B,OAAO3F,CAAlB,EAAqB2F,OAAO1F,CAA5B,EAA+B,OAAKC,GAApC,EAAyC,CAAzC,EAA4C,EAACQ,GAAE,IAAH,EAASC,GAAE,IAAX,EAA5C,EAA8DgF,OAAO7E,QAArE,EAA+E6E,OAAOpF,WAAtF,CAAX;AACE,iBAAK+D,OAAL,CAAarC,IAAb,CAAkBuF,IAAlB;AACD;AACD7B,eAAOxF,IAAP,GAAc,CAAd;AACD,OAND;AAOAyF,iBAAW,YAAI;AACb,YAAI,OAAKf,OAAL,KAAiB,IAArB,EAA0B;AACxB,cAAMiD,QAAQ,IAAIC,KAAJ,CAAU,+BAAV,CAAd;AACAD,gBAAME,MAAN,GAAe,GAAf;AACAF,gBAAMpD,IAAN;AACD;AACF,OAND,EAMG,GANH;AAOD;;;mCAGa;AACZ,UAAG,KAAKV,SAAL,KAAmB,IAAtB,EAA2B;AACzB,YAAI,KAAKD,KAAL,IAAc,KAAKC,SAAvB,EAAkC;AAC9BE,uBAAa+D,OAAb,CAAqB,WAArB,EAAkC,KAAKlE,KAAvC;AACA,eAAKC,SAAL,GAAiB,CAACE,aAAaC,OAAb,CAAqB,WAArB,CAAlB;AACH;AACF;AACF;;;mCAEcwB,M,EAAO;AACpBA,aAAO3F,CAAP,GAAW2F,OAAO3F,CAAP,GAAW2F,OAAO9E,KAAP,GAAeE,KAAKyB,GAAL,CAAS,KAAKL,QAAL,CAAcwD,OAAO/E,KAArB,CAAT,CAArC;AACA+E,aAAO1F,CAAP,GAAW0F,OAAO1F,CAAP,GAAW0F,OAAO9E,KAAP,GAAe,CAAC,CAAhB,GAAoBE,KAAK0B,GAAL,CAAS,KAAKN,QAAL,CAAcwD,OAAO/E,KAArB,CAAT,CAA1C;AACA,UAAI+E,OAAO3F,CAAP,IAAY,EAAhB,EAAoB;AAClB2F,eAAO/E,KAAP,GAAe,MAAM+E,OAAO/E,KAA5B;AACD,OAFD,MAEO,IAAI+E,OAAO3F,CAAP,IAAY,KAAK4B,MAAL,CAAYG,KAAZ,GAAoB,EAApC,EAAuC;AAC5C4D,eAAO/E,KAAP,GAAe,MAAM+E,OAAO/E,KAA5B;AACD,OAFM,MAEA,IAAI+E,OAAO1F,CAAP,IAAY,EAAhB,EAAoB;AACzB0F,eAAO1F,CAAP,GAAW,EAAX;AACA;AACD;AACF;;;oCAEe0F,M,EAAO;AACrB,UAAII,aAAa,EAAjB;AACA,WAAKmC,cAAL,GAAsB,CAAtB;AACA,WAAK,IAAIxH,IAAI,CAAb,EAAgBA,IAAI,KAAKyC,KAAL,CAAW2D,OAAX,CAAmB5F,MAAvC,EAA+CR,GAA/C,EAAoD;AAClD,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKwC,KAAL,CAAW2D,OAAX,CAAmBpG,CAAnB,EAAsBQ,MAA1C,EAAkDP,GAAlD,EAAuD;;AAErD,cAAI,KAAKwC,KAAL,CAAW2D,OAAX,CAAmBpG,CAAnB,EAAsBC,CAAtB,EAAyBR,IAAzB,KAAkC,CAAtC,EAAyC;AACvC,iBAAK+H,cAAL,IAAuB,CAAvB;AACA;AACD;;AAED,cACE,CAAE,KAAK/E,KAAL,CAAW2D,OAAX,CAAmBpG,CAAnB,EAAsBC,CAAtB,EAAyBX,CAAzB,GAA6B2F,OAAO3F,CAApC,IAAyC,CAAC,EAA1C,IACA,KAAKmD,KAAL,CAAW2D,OAAX,CAAmBpG,CAAnB,EAAsBC,CAAtB,EAAyBX,CAAzB,GAA6B2F,OAAO3F,CAApC,IAAyC,CAD1C,IAEA,KAAKmD,KAAL,CAAW2D,OAAX,CAAmBpG,CAAnB,EAAsBC,CAAtB,EAAyBX,CAAzB,GAA6B2F,OAAO3F,CAApC,IAAyC,EAAzC,IACC,KAAKmD,KAAL,CAAW2D,OAAX,CAAmBpG,CAAnB,EAAsBC,CAAtB,EAAyBX,CAAzB,GAA6B2F,OAAO3F,CAApC,IAAyC,CAH3C,MAIE,KAAKmD,KAAL,CAAW2D,OAAX,CAAmBpG,CAAnB,EAAsBC,CAAtB,EAAyBV,CAAzB,GAA6B0F,OAAO1F,CAApC,IAAyC,CAAC,EAA1C,IACA,KAAKkD,KAAL,CAAW2D,OAAX,CAAmBpG,CAAnB,EAAsBC,CAAtB,EAAyBV,CAAzB,GAA6B0F,OAAO1F,CAApC,IAAyC,CAD1C,IAEA,KAAKkD,KAAL,CAAW2D,OAAX,CAAmBpG,CAAnB,EAAsBC,CAAtB,EAAyBV,CAAzB,GAA6B0F,OAAO1F,CAApC,IAAyC,EAAzC,IACC,KAAKkD,KAAL,CAAW2D,OAAX,CAAmBpG,CAAnB,EAAsBC,CAAtB,EAAyBV,CAAzB,GAA6B0F,OAAO1F,CAApC,IAAyC,CAP3C,CADF,EASA;;AAEE8F,uBAAW9D,IAAX,CACE,EAAC0D,QAAQ,KAAKxC,KAAL,CAAW2D,OAAX,CAAmBpG,CAAnB,EAAsBC,CAAtB,CAAT;AACAwH,wBAAUpH,KAAKqH,GAAL,CAAS,KAAKjF,KAAL,CAAW2D,OAAX,CAAmBpG,CAAnB,EAAsBC,CAAtB,EAAyBX,CAAzB,GAA6B2F,OAAO3F,CAA7C;AADV,aADF;AAIH;AACF;AACF;AACD,aAAO+F,UAAP;AACD;;;qCAGkBA,U,EAAW;AAC1B,UAAIE,sBAAJ;AACA,UAAIoC,cAAc,IAAlB;AACAtC,iBAAWL,OAAX,CAAmB,UAAC4C,SAAD,EAAa;AAC9B,YAAID,gBAAgB,IAApB,EAA2B;AACzBpC,0BAAgBqC,SAAhB;AACAD,wBAAcC,UAAUH,QAAxB;AACD,SAHD,MAGO,IAAIE,cAAcC,UAAUH,QAA5B,EAAsC;AAC3ClC,0BAAgBqC,SAAhB;AACAD,wBAAcC,UAAUH,QAAxB;AACD;AACF,OARD;AASA,aAAOlC,aAAP;AACD;;;oCAEeA,a,EAAc;;AAE5B,UAAIvF,IAAIuF,cAAcN,MAAd,CAAqBvF,GAArB,CAAyBM,CAAjC;AACA,UAAIC,IAAIsF,cAAcN,MAAd,CAAqBvF,GAArB,CAAyBO,CAAjC;AACA,UAAI4H,QAAQ,KAAKpF,KAAL,CAAW2D,OAAX,CAAmBpG,CAAnB,EAAsBC,IAAI,CAA1B,CAAZ;AACA,UAAI6H,aAAa,KAAKrF,KAAL,CAAW2D,OAAX,CAAmBpG,IAAI,CAAvB,EAA2BC,CAA3B,CAAjB;AACA,UAAI8H,OAAO,KAAKtF,KAAL,CAAW2D,OAAX,CAAmBpG,CAAnB,EAAsBC,IAAI,CAA1B,CAAX;AACA,UAAI+H,oBAAJ;AACA,UAAI,KAAKvF,KAAL,CAAW2D,OAAX,CAAmBpG,IAAE,CAArB,EAAwB,CAAxB,EAA2BI,QAA3B,KAAwC,KAA5C,EAAmD;AACjD4H,sBAAc,KAAKvF,KAAL,CAAW2D,OAAX,CAAmBpG,IAAI,CAAvB,EAA0BC,IAAI,CAA9B,CAAd;AACD,OAFD,MAEO;AACH+H,sBAAc,KAAKvF,KAAL,CAAW2D,OAAX,CAAmBpG,IAAI,CAAvB,EAA0BC,IAAI,CAA9B,CAAd;AACH;;AAED,UAAIwF,gBAAgB,CAAEoC,KAAF,EAASG,WAAT,EAAsBF,UAAtB,EAAkCC,IAAlC,CAApB;AACA,UAAIE,oBAAoB,EAAxB;;AAEAxC,oBAAcT,OAAd,CAAsB,UAACkD,IAAD,EAAQ;AAC5B,YAAIA,SAASxB,SAAb,EAAwB;AACtB,iBAAO,IAAP;AACD,SAFD,MAEO,IAAIwB,KAAKzI,IAAL,KAAc,CAAlB,EAAoB;AACzBwI,4BAAkB1G,IAAlB,CAAuB2G,IAAvB;AACD;AACF,OAND;AAOA,aAAOD,iBAAP;AACD;;;0CAEmBhD,M,EAAQQ,a,EAAc;;AAE1C,UAAIA,cAAcjF,MAAd,KAAyB,CAA7B,EAAgC;AAC9B,eAAO,IAAP;AACD;AACD,UAAI+E,sBAAJ;AACA,UAAIoC,cAAc,IAAlB;;AAIAlC,oBAAcT,OAAd,CAAsB,UAACmD,SAAD,EAAa;AACjC,YAAIC,QAAS/H,KAAKqH,GAAL,CAASS,UAAU7I,CAAV,GAAc2F,OAAO3F,CAA9B,CAAb;AACA,YAAI+I,QAAShI,KAAKqH,GAAL,CAASS,UAAU5I,CAAV,GAAc0F,OAAO1F,CAA9B,CAAb;;AAEE,YAAI+I,OAAOF,QAAQC,KAAnB;AACA,YAAIV,gBAAgB,IAAhB,IAAwBA,cAAcW,IAA1C,EAAgD;AAC9C/C,0BAAgB4C,SAAhB;AACAR,wBAAcW,IAAd;AAEH;AACF,OAVD;;AAYA,UAAI/C,cAAcnF,QAAd,KAA2B,IAA/B,EAAoC;AAClC6E,eAAO7E,QAAP,GAAkB,IAAlB;AACC;;AAEA,WAAKqC,KAAL,CAAW2D,OAAX,CAAmBb,cAAc7F,GAAd,CAAkBM,CAArC,EAAwCuF,cAAc7F,GAAd,CAAkBO,CAA1D,EAA6DJ,WAA7D,GAA2EoF,OAAOpF,WAAlF;AACA,WAAK4C,KAAL,CAAW2D,OAAX,CAAmBb,cAAc7F,GAAd,CAAkBM,CAArC,EAAwCuF,cAAc7F,GAAd,CAAkBO,CAA1D,EAA6DR,IAA7D,GAAoE,CAApE;AACA,WAAKoE,UAAL,GAAkB,KAAKpB,KAAL,CAAW2D,OAAX,CAAmBb,cAAc7F,GAAd,CAAkBM,CAArC,EAAwCuF,cAAc7F,GAAd,CAAkBO,CAA1D,CAAlB;AACA;AACF;;;6BAEO;AACJ,WAAKwC,KAAL,CAAW2D,OAAX,CAAmBpB,OAAnB,CAA2B,UAACuD,SAAD,EAAe;AACxCA,kBAAUvD,OAAV,CAAkB,UAACC,MAAD,EAAY;AAC5BA,iBAAO1F,CAAP,GAAW0F,OAAO1F,CAAP,GAAW,EAAtB;AACA0F,iBAAOvF,GAAP,CAAWM,CAAX,IAAgB,CAAhB;AACD,SAHD;AAID,OALD;AAMA,WAAKyC,KAAL,CAAW2D,OAAX,CAAmBoC,OAAnB,CAA2B,KAAK/F,KAAL,CAAWgG,OAAtC;AACA,WAAKtF,MAAL,GAAc,CAAd;AACA,WAAKV,KAAL,CAAWgG,OAAX,GAAqB,EAArB;AACA,WAAKhG,KAAL,CAAWiG,QAAX,IAAuB,CAAvB;AACA,WAAKjG,KAAL,CAAWkG,WAAX;;AAEA,WAAKlG,KAAL,CAAW2D,OAAX,CAAmBrC,GAAnB;AAIH;;;0BAEI;AACH,WAAK,IAAI9D,IAAG,CAAZ,EAAeA,IAAI,KAAKwC,KAAL,CAAW2D,OAAX,CAAmB,CAAnB,EAAsB5F,MAAzC,EAAiDP,GAAjD,EAAsD;AACpD,YAAI,KAAKwC,KAAL,CAAW2D,OAAX,CAAmB,CAAnB,EAAsBnG,CAAtB,EAAyBR,IAAzB,KAAkC,CAAtC,EAAyC;AACvC,iBAAO,KAAP;AACD;AACF;AACF;;;wCAGmB6G,C,EAAE;;AAEpB,UAAI,KAAKlD,IAAL,IAAa,KAAKa,GAAtB,EAA2B;AAC3B,aAAKxB,KAAL,GAAa,oBAAU,KAAKvB,MAAf,EAAuB,KAAK1B,GAA5B,CAAb;AACA,aAAKkD,OAAL,GAAe,sBAAY,KAAKxB,MAAjB,EAAyB,KAAK1B,GAA9B,CAAf;AACA,aAAK6D,KAAL,GAAa,CAAb;AACA,aAAKF,MAAL,GAAc,CAAd;AACA,aAAKa,IAAL,GAAY,IAAZ;AACA,aAAKZ,IAAL,GAAY,KAAZ;AACA,aAAKa,GAAL,GAAW,KAAX;AACC;AACF;;;gCAEWqC,C,EAAE;AACZ,UAAI,KAAKtC,IAAL,KAAc,IAAlB,EAAwB;AACtB,aAAKb,MAAL,IAAe,CAAf;AACA,YAAI,KAAKT,OAAL,CAAavB,aAAb,CAA2BX,MAA3B,KAAsC,CAA1C,EAA6C;AAC3C,eAAKqD,UAAL,GAAkB,KAAKnB,OAAL,CAAavB,aAAb,CAA2B,CAA3B,CAAlB;AACA,cAAI,KAAKgD,OAAL,KAAiB,IAArB,EAA0B;AACxB,gBAAMiD,QAAQ,IAAIC,KAAJ,CAAU,kBAAV,CAAd;AACA;AACAD,kBAAME,MAAN,GAAe,EAAf;AACAF,kBAAMpD,IAAN;AACD;AACD,eAAKtB,OAAL,CAAavB,aAAb,GAA6B,KAAKuB,OAAL,CAAavB,aAAb,CAA2ByH,KAA3B,CAAiC,CAAjC,CAA7B;AACD;AACD,aAAKjG,WAAL,CAAiB2D,CAAjB;AACD;AACF;;;6BAEQpG,K,EAAO;AACZ,aAAOA,SAAS,MAAMG,KAAKM,EAApB,CAAP;AACH;;;6BAEQT,K,EAAO;AACZ,aAAOA,SAASG,KAAKM,EAAL,GAAU,GAAnB,CAAP;AACH;;;gCAEW2F,C,EAAG;AACX,UAAI1B,OAAO,KAAK1D,MAAL,CAAY2H,qBAAZ,EAAX;AACA,aAAO;AACHvJ,WAAGe,KAAKyI,KAAL,CAAW,CAACxC,EAAEyC,OAAF,GAAYnE,KAAKmD,IAAlB,KACCnD,KAAKiD,KAAL,GAAajD,KAAKmD,IADnB,IACyB,KAAK7G,MAAL,CAAYG,KADhD,CADA;AAGH9B,WAAGc,KAAKyI,KAAL,CAAW,CAACxC,EAAE0C,OAAF,GAAYpE,KAAKqE,GAAlB,KACCrE,KAAKsE,MAAL,GAActE,KAAKqE,GADpB,IACyB,KAAK/H,MAAL,CAAYE,MADhD;AAHA,OAAP;AAMH;;;gCAEWkF,C,EAAG;AACX,UAAI5G,MAAM,KAAKyJ,WAAL,CAAiB7C,CAAjB,CAAV;AACA,UAAI8C,aAAa,KAAKC,QAAL,CAAchJ,KAAKiJ,KAAL,CAAY,KAAKpI,MAAL,CAAYE,MAAZ,GAAqB,EAAtB,GAA4B1B,IAAIH,CAA3C,EAA8CG,IAAIJ,CAAJ,GAAU,KAAK4B,MAAL,CAAYG,KAAZ,GAAkB,CAA1E,CAAd,CAAjB;;AAEA,UAAI+H,aAAa,CAAjB,EAAoB;AAChBA,qBAAa,OAAO,MAAMA,UAAb,CAAb;AACH;AACD,UAAMG,SAAS,CAAf;AACA,UAAMC,SAAS,GAAf;AACA,UAAIJ,aAAa,EAAb,IAAmBA,aAAa,GAApC,EAAyC;AACrC,YAAIA,aAAaI,MAAjB,EAAyB;AACrBJ,uBAAaI,MAAb;AACH;AACJ,OAJD,MAIO;AACH,YAAIJ,aAAaG,MAAb,IAAuBH,cAAc,GAAzC,EAA8C;AAC1CA,uBAAaG,MAAb;AACH;AACJ;;AAED,WAAKrJ,KAAL,GAAakJ,UAAb;AACA,WAAK1G,OAAL,CAAavB,aAAb,CAA2B,CAA3B,EAA8BjB,KAA9B,GAAsCkJ,UAAtC;AACD;;;uCAGkB;AACjB,UAAI,KAAKlF,KAAL,KAAe,IAAnB,EAAyB;AACvB,aAAKuF,UAAL;AACA,aAAKvF,KAAL,GAAa,KAAb;AACD,OAHD,MAGO;AACL,aAAKwF,SAAL;AACA,aAAKxF,KAAL,GAAa,IAAb;AACD;AACF;;;oCAEc;AACb,UAAMQ,WAAWzC,SAASG,cAAT,CAAwB,UAAxB,CAAjB;AACA,UAAI,KAAK+B,OAAL,KAAiB,IAArB,EAA2B;AACzB,aAAKA,OAAL,GAAe,KAAf;AACAO,iBAASiF,SAAT,GAAqB,wBAArB;AACD,OAHD,MAGO;AACL,aAAKxF,OAAL,GAAe,IAAf;AACAO,iBAASiF,SAAT,GAAqB,uBAArB;AACD;AACF;;;iCAEW;AACV,UAAMlF,cAAcxC,SAASG,cAAT,CAAwB,aAAxB,CAApB;AACAqC,kBAAYkF,SAAZ,GAAwB,wBAAxB;AACA,UAAMvC,QAAQnF,SAASG,cAAT,CAAwB,SAAxB,CAAd;AACAgF,YAAMwC,KAAN;AACD;;;gCAEU;AACT,UAAMnF,cAAcxC,SAASG,cAAT,CAAwB,aAAxB,CAApB;AACAqC,kBAAYkF,SAAZ,GAAwB,uBAAxB;AACA,UAAMvC,QAAQnF,SAASG,cAAT,CAAwB,SAAxB,CAAd;AACAgF,YAAMpD,IAAN;AACD;;;;;;kBAKUxB,I;;;;;;;;;;;;;;;ACzmBf;;;;AACA;;;;;;;;AAEA,IAAMqH,eAAe;AACnBC,eAAY,EADO;AAEnBC,gBAAc,EAFK;AAGnBC,aAAW,EAHQ;AAInBC,YAAU,CAJS;AAKnBC,gBAAc,EALK;AAMnBC,eAAa;AANM,CAArB;;IASMC,K;AACJ,iBAAYlJ,MAAZ,EAAoB1B,GAApB,EAAwB;AAAA;;AACtB,SAAKA,GAAL,GAAWA,GAAX;AACA,SAAK0B,MAAL,GAAcA,MAAd;AACA,SAAKkF,OAAL,GAAe,KAAKiE,aAAL,EAAf;AACA,SAAK5B,OAAL,GAAe,EAAf;AACA,SAAKC,QAAL,GAAgB,CAAhB;AACA,SAAKC,WAAL;AAED;;;;kCAEY;AACX,UAAI2B,gBAAJ;AACA,UAAI,KAAK7B,OAAL,CAAajI,MAAb,KAAwBqJ,aAAaM,WAAzC,EAAsD;AACpD,aAAK,IAAIlK,IAAI,CAAb,EAAgBA,IAAI4J,aAAaM,WAAjC,EAA8ClK,GAA9C,EAAmD;AACjD,cAAK,KAAKyI,QAAL,GAAgB,CAAhB,KAAsB,CAA3B,EAA8B;AAC5B4B,sBAAWrK,IAAI4J,aAAaC,WAAjB,GAA6B,EAA9B,GAAoC,EAA9C;AACA,iBAAKrB,OAAL,CAAalH,IAAb,CAAkB,qBAAW+I,OAAX,EAAoB,EAApB,EAAwB,KAAK9K,GAA7B,EAAmC,CAAnC,EAAsC,EAACQ,GAAG,CAAJ,EAAMC,GAAGA,CAAT,EAAtC,EAAmD,IAAnD,CAAlB;AACD,WAHD,MAGO;AACLqK,sBAAWrK,IAAI,EAAL,GAAW,EAArB;AACA,iBAAKwI,OAAL,CAAalH,IAAb,CAAkB,qBAAW+I,OAAX,EAAoB,EAApB,EAAwB,KAAK9K,GAA7B,EAAmC,CAAnC,EAAsC,EAACQ,GAAG,CAAJ,EAAMC,GAAGA,CAAT,EAAtC,EAAmD,KAAnD,CAAlB;AACD;AACF;AACF;AACF;;;oCAGe;AACd,UAAImG,UAAU,EAAd;AACA,WAAK,IAAIpG,IAAI,CAAb,EAAgBA,IAAI6J,aAAaK,YAAjC,EAA+ClK,GAA/C,EAAoD;AAClDoG,gBAAQ7E,IAAR,CAAa,EAAb;AACA,aAAK,IAAItB,IAAI,CAAb,EAAgBA,IAAI4J,aAAaM,WAAjC,EAA8ClK,GAA9C,EAAmD;AACjD,cAAIqK,gBAAJ;AACA,cAAIC,gBAAJ;AACA,cAAKvK,IAAI,CAAJ,KAAU,CAAf,EAAmB;AACjBsK,sBAAWrK,IAAI4J,aAAaC,WAAlB,GAAiC,EAA3C;AACAS,sBAAWvK,IAAI6J,aAAaE,YAAlB,GAAkC,EAA5C;AACD,WAHD,MAGO;AACLO,sBAAWrK,IAAI4J,aAAaC,WAAjB,GAA6B,EAA9B,GAAoC,EAA9C;AACAS,sBAAWvK,IAAI6J,aAAaE,YAAlB,GAAkC,EAA5C;AACD;;AAED,cAAK/J,IAAG6J,aAAaI,QAArB,EAAgC;AAC9B,gBAAIhF,SAAU,qBAAWqF,OAAX,EAAoBC,OAApB,EAA6B,KAAK/K,GAAlC,EAAuC,CAAvC,EAA0C,EAACS,GAAGA,CAAJ,EAAOD,GAAGA,CAAV,EAA1C,CAAd;AACA,gBAAIA,IAAI,CAAJ,KAAU,CAAd,EAAgB;AACdiF,qBAAO7E,QAAP,GAAkB,IAAlB;AACD;AACDgG,oBAAQpG,CAAR,EAAWuB,IAAX,CAAgB0D,MAAhB;AACD,WAND,MAMO;AACL,gBAAIA,UAAU,qBAAWqF,OAAX,EAAoBC,OAApB,EAA6B,KAAK/K,GAAlC,EAAuC,CAAvC,EAA0C,EAACS,GAAGA,CAAJ,EAAOD,GAAGA,CAAV,EAA1C,CAAd;AACAoG,oBAAQpG,CAAR,EAAWuB,IAAX,CAAgB0D,OAAhB;AACA,gBAAIjF,IAAI,CAAJ,KAAU,CAAd,EAAgB;AACdiF,sBAAO7E,QAAP,GAAkB,IAAlB;AACD;AACF;AAEF;AACF;;AAGD,aAAOgG,OAAP;AACD;;;gCAEU;AACT,WAAM,IAAIpG,IAAE,CAAZ,EAAeA,IAAI,KAAKoG,OAAL,CAAa5F,MAAhC,EAAwCR,GAAxC,EAA8C;AAC9C,aAAM,IAAIC,IAAE,CAAZ,EAAeA,IAAI,KAAKmG,OAAL,CAAapG,CAAb,EAAgBQ,MAAnC,EAA2CP,GAA3C,EAAiD;AAC7C,eAAKmG,OAAL,CAAapG,CAAb,EAAgBC,CAAhB,EAAmB+B,UAAnB;AACD;AACF;AACF;;;;;;kBAGYoI,K","file":"./lib/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4a91578974587631e608","const BUBBLECOLORS = [\n  \"#2EFE2E\",\n  \"#0040FF\",\n  \"#FF0000\",\n  \"#ff9900\",\n  \"#660066\",\n  \"#ff66ff\"\n];\n\nclass Bubble {\n  constructor(x, y, ctx, type, pos, rowshift=false, color){\n    this.bubbleColor = color || this.pickBubbleColor();\n    this.bubbleRadius = 15;\n    this.ctx = ctx;\n    this.x = x;\n    this.y = y;\n    this.pos= pos || {r: null, c: null};\n    this.angle = 90;\n    this.type = type;\n    this.speed = 20;\n    this.rowShift = rowshift;\n  }\n\n  pickBubbleColor(){\n    return BUBBLECOLORS[Math.floor(Math.random() * BUBBLECOLORS.length)];\n  }\n\n  drawBubble(){\n    if (this.type === 1) {\n      this.ctx.beginPath();\n      this.ctx.arc(this.x, this.y, this.bubbleRadius, 0, Math.PI*2);\n      this.ctx.fillStyle = this.bubbleColor;\n      this.ctx.fill();\n      this.ctx.strokeStyle = \"#000000\";\n      this.ctx.lineWidth=1;\n      this.ctx.stroke();\n      this.ctx.beginPath();\n      this.ctx.arc(this.x - 5, this.y - 5, 1, 0, 2*Math.PI);\n      this.ctx.fillStyle = \"rgba(255, 255, 255, .5)\";\n      this.ctx.fill();\n      this.ctx.beginPath();\n      this.ctx.arc(this.x - 5, this.y - 5, 3, 0, 2*Math.PI);\n      this.ctx.fillStyle = \"rgba(255, 255, 255, .3)\";\n      this.ctx.fill();\n      this.ctx.beginPath();\n      this.ctx.arc(this.x - 5, this.y - 5, 5, 0, 2*Math.PI);\n      this.ctx.fillStyle = \"rgba(255, 255, 255, .2)\";\n      this.ctx.fill();\n      this.ctx.beginPath();\n      this.ctx.arc(this.x - 5, this.y - 5, 7, 0, 2*Math.PI);\n      this.ctx.fillStyle = \"rgba(255, 255, 255, .1)\";\n      this.ctx.fill();\n\n    }\n  }\n\n}\n\nexport default Bubble;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/bubble.js","import Bubble from './bubble';\n\nclass Shooter {\n  constructor(canvas, ctx, angle){\n    this.loadedBubbles = [];\n    this.canvas = canvas;\n    this.ctx = ctx;\n    this.height = 50;\n    this.width = 3;\n    this.loadBubbles();\n  }\n\n  degToRad(angle) {\n      return angle * (Math.PI / 180);\n  }\n\n  loadBubbles(){\n    if (this.loadedBubbles.length !== 2) {\n      if (this.loadedBubbles.length === 0) {\n        this.loadedBubbles.push(new Bubble(this.canvas.width/2 + 1,this.canvas.height - 15, this.ctx, 1));\n      } else {\n        this.loadedBubbles.push(new Bubble(this.canvas.width/2 + 75, this.canvas.height - 15, this.ctx, 1));\n      }\n      this.loadBubbles();\n    }\n  }\n\n\n\n  drawShooter(angle){\n    let radAngle = this.degToRad(angle);\n    let centerx = this.canvas.width/2;\n    let centery = this.canvas.height - 15;\n    this.ctx.lineWidth = 2;\n    this.ctx.strokeStyle = \"#000000\";\n    this.ctx.beginPath();\n    this.ctx.moveTo(centerx, centery);\n    this.ctx.lineTo(centerx + 60 * Math.cos(radAngle), centery - 60 * Math.sin(radAngle));\n    this.ctx.stroke();\n  }\n\n  drawLoadedBubbles(){\n    if (this.loadedBubbles.length < 2) {\n      this.loadedBubbles[0].drawBubble();\n    } else {\n      this.loadedBubbles[0].drawBubble();\n      this.loadedBubbles[1].drawBubble();\n    }\n  }\n}\n\nexport default Shooter;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/shooter.js","// const Game = require(\"./game\");\n// const GameView = require(\"./game_view\");\nimport Game from './game';\nimport Shooter from './shooter';\n\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const canvasEl = document.getElementById(\"BubbleBurstCanvas\");\n  const ctx = canvasEl.getContext(\"2d\");\n  let game = new Game(canvasEl, ctx);\n  game.drawGame();\n});\n\n\n\n// WEBPACK FOOTER //\n// ./lib/bubbleburst.js","import Board from './board';\nimport Shooter from './shooter';\nimport Bubble from  './bubble';\nclass Game {\n  constructor(canvas, ctx){\n    this.canvas = canvas;\n    this.ctx = ctx;\n    this.board = new Board(canvas, ctx);\n    this.shooter = new Shooter(canvas, ctx);\n    this.angle = 90;\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.findCluster = this.findCluster.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.handleStartClick = this.handleStartClick.bind(this);\n    this.handleGameOverClick = this.handleGameOverClick.bind(this);\n    this.handleAudioClick = this.handleAudioClick.bind(this);\n    this.handleFXClick = this.handleFXClick.bind(this);\n    this.clicks = 0;\n    this.lost = false;\n    this.score = 0;\n    this.highscore = Number(localStorage.getItem('highscore'));\n    this.finishedShots = [];\n    this.floats = [];\n    this.cluster = [];\n    this.shotBubble = null;\n    this.seen = {};\n    this.pop = false;\n    this.play = true;\n    this.won = false;\n    this.sound = false;\n    this.soundFX = true;\n    this.start = false;\n  }\n\n\n  drawGame(){\n    this.canvas.addEventListener(\"mousemove\", this.onMouseMove);\n    if (this.start){\n      this.canvas.addEventListener(\"click\", this.handleClick);\n    }\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    this.board.drawBoard();\n    this.shooter.drawShooter(this.angle);\n    this.shooter.drawLoadedBubbles();\n    const soundToggle = document.getElementById(\"toggleSound\");\n    const fxToggle = document.getElementById(\"toggleFX\");\n    soundToggle.addEventListener(\"click\", this.handleAudioClick);\n    fxToggle.addEventListener(\"click\", this.handleFXClick);\n    this.getHighScore();\n\n\n    this.canvas.addEventListener(\"click\", this.handleStartClick);\n  if (!this.start) {\n        this.ctx.beginPath();\n        this.ctx.rect(0, 0, 495, 640);\n        this.ctx.fillStyle = 'rgba(0, 0, 0, .7)';\n        this.ctx.fill();\n        this.ctx.font = \"50px Bangers\";\n        this.ctx.fillStyle = '#ffffff';\n        this.ctx.fillText(\"Click to Start\",this.canvas.width/4 , this.canvas.height/2);\n      }\n      this.ctx.font = \"24px Bangers\";\n      this.ctx.fillStyle = '#ffffff';\n      this.ctx.fillText(`HighScore: ${this.highscore}`, 10,this.canvas.height-5);\n\n    if (this.clicks === 10) {\n      this.addRow();\n    }\n\n    if (this.cluster.length > 0){\n      this.cluster.forEach((bubble)=>{\n        bubble.bubbleRadius *= 1.04;\n        bubble.drawBubble();\n      });\n      setTimeout(()=>{this.cluster = [];}, 150);\n    }\n\n    if (this.floats.length > 0) {\n      for (let i = 0; i < this.floats.length; i++) {\n        this.floats[i].y += 10;\n        this.floats[i].type = 1;\n        this.floats[i].drawBubble();\n      }\n      setTimeout(()=>{this.floats =[];}, 1000);\n    }\n\n    this.ctx.font = \"24px Bangers\";\n    this.ctx.fillStyle = '#ffffff';\n    this.ctx.fillText(`Score: ${this.score}`,this.canvas.width - 150,this.canvas.height-5);\n\n    if (this.shotBubble) {\n      this.moveShotBubble(this.shotBubble);\n      this.canvas.addEventListener(\"click\", this.handleGameOverClick);\n      this.shotBubble.drawBubble();\n      let collisions = this.bubbleCollision(this.shotBubble);\n      if (collisions.length > 0) {\n        let closestBubble = this.closestCollision(collisions);\n        let possibilities = this.availableSpaces(closestBubble);\n        this.closestAvailableSpace(this.shotBubble, possibilities);\n        this.shotBubble.drawBubble();\n        this.findCluster(this.shotBubble);\n        this.findFloaters();\n      }\n    }\n\n\n\n    const pic = new Image();\n    pic.src = './assets/gameover.png';\n    this.gameOver();\n    if (this.lost || this.won) {\n\n      this.ctx.beginPath();\n      this.ctx.rect(0, 0, 495, 640);\n      this.ctx.fillStyle = 'rgba(0, 0, 0, .7)';\n      this.ctx.fill();\n      this.ctx.closePath();\n      this.ctx.drawImage(pic, this.canvas.width/6, this.canvas.height/5, 315, 75);\n\n      if (this.won){\n        this.ctx.fillStyle = '#ffffff';\n        this.ctx.font = \"120px Bangers\";\n        this.ctx.fillText(`You win!`,(this.canvas.width/5 - 45),this.canvas.height/2 - 35);\n      }\n\n      this.ctx.font = \"24px Bangers\";\n      this.ctx.fillStyle = '#ff0200';\n      this.ctx.fillText(`Score: ${this.score}`,this.canvas.width - 150,this.canvas.height-5);\n      this.ctx.font = \"24px Bangers\";\n      this.ctx.fillStyle = '#ffffff';\n      this.ctx.fillText(\"Click to Play Again\",this.canvas.width/3, this.canvas.height/2);\n      requestAnimationFrame(this.drawGame.bind(this));\n    } else {\n      requestAnimationFrame(this.drawGame.bind(this));\n    }\n  }\n\n  gameOver(){\n    this.board.bubbles[21].forEach((bubble) => {\n      if (bubble.type === 1) {\n        this.lost = true;\n        this.play = false;\n      }\n    });\n    let type1Bubbles = [];\n    this.board.bubbles[0].forEach((bubble) => {\n      if (bubble.type === 1 ) {\n        type1Bubbles.push(bubble);\n      }\n    });\n\n    if ( type1Bubbles.length === 0 ){\n      this.won = true;\n    }\n\n  }\n\n  handleStartClick(e){\n    if (this.start === false){\n      this.start = true\n    }\n  }\n\n  togglePop(){\n    this.pop = false;\n  }\n  reload(){\n    this.shooter.loadBubbles();\n    this.shooter.loadedBubbles[0].x = this.canvas.width / 2;\n    this.shooter.loadedBubbles[0].y = this.canvas.height - 15;\n    this.shooter.drawLoadedBubbles();\n  }\n\n  findNeighbors(bubble){\n    let neighbors;\n    const board= this.board.bubbles;\n    const r = bubble.pos.r;\n    const c = bubble.pos.c;\n\n    if (bubble.rowShift === true) {\n      if (c - 1 < 0 && r -1 < 0){\n        neighbors = [board[r+1][c],\n                     board[r+1][c+1]];\n      } else if ( c + 1 > 15 && r - 1 < 0 ) {\n        neighbors = [board[r][c-1],\n                     board[r+1][c]];\n      } else if(c + 1 > 15){\n        neighbors = [board[r][c-1],\n                     board[r+1][c],\n                     board[r-1][c]];\n      }else if (r - 1 < 0) {\n        neighbors = [board[r][c+1],\n                     board[r][c-1],\n                     board[r+1][c],\n                     board[r+1][c+1]];\n      } else if (c - 1 < 0) {\n        neighbors = [board[r][c+1],\n                     board[r+1][c],\n                     board[r+1][c+1],\n                     board[r-1][c],\n                     board[r-1][c+1]];\n      }else {\n        neighbors = [board[r][c+1],\n                    board[r][c-1],\n                    board[r+1][c],\n                    board[r+1][c+1],\n                    board[r-1][c],\n                    board[r-1][c+1]];\n                   }\n    } else {\n      if ( c + 1 > 15 && r - 1 < 0 ) {\n        neighbors = [\n                     board[r][c-1],\n                     board[r+1][c],\n                     board[r+1][c-1]];\n      } else if (c - 1 < 0 && r -1 < 0) {\n        neighbors = [board[r][c+1],\n                     board[r][c-1],\n                     board[r+1][c]];\n      } else if (c + 1 > 15){\n        neighbors = [board[r][c-1],\n                     board[r+1][c],\n                     board[r+1][c-1],\n                     board[r-1][c],\n                     board[r-1][c-1]];\n      } else if (c - 1 < 0) {\n        neighbors = [board[r][c+1],\n                     board[r+1][c],\n                     board[r-1][c]\n                   ];\n\n      } else if (r - 1 < 0){\n        neighbors = [board[r][c+1],\n                     board[r][c-1],\n                     board[r+1][c],\n                     board[r+1][c-1]];\n      }else {\n      neighbors = [board[r][c+1],\n                   board[r][c-1],\n                   board[r+1][c],\n                   board[r+1][c-1],\n                   board[r-1][c],\n                   board[r-1][c-1]];\n                 }\n    }\n    let neighborMatch = [];\n    neighbors.forEach((neighbor)=>{\n      if (this.shotBubble === null && neighbor !== undefined && neighbor.type === 1) {\n\n        neighborMatch.push(neighbor);\n      } else if (neighbor !== undefined &&\n          neighbor.type === 1 &&\n          neighbor.bubbleColor === this.shotBubble.bubbleColor){\n            neighborMatch.push(neighbor);\n          }\n    });\n    return neighborMatch;\n  }\n\n  findFloaters(){\n    const topRow = this.board.bubbles[0];\n    let allNeighbors = [];\n    let seen = [];\n    for (let c = 0; c < topRow.length; c++) {\n      let queue = [topRow[c]];\n      while (queue.length > 0) {\n\n          let bubb = queue.shift();\n          if (bubb.type === 1) {\n          seen.push(bubb);\n          allNeighbors.push(bubb);\n          let neighbors = this.findNeighbors(bubb);\n          neighbors.forEach((neighbor)=>{\n            if (seen.includes(neighbor) === false ){\n              seen.push(neighbor);\n              allNeighbors.push(neighbor);\n              queue.push(neighbor);\n            }\n          });\n        }\n      }\n    }\n    let floats = [];\n    for (var r = 0; r < this.board.bubbles.length; r++) {\n      for (var c = 0; c < this.board.bubbles[r].length; c++) {\n        if (allNeighbors.includes(this.board.bubbles[r][c]) === false){\n          if  (this.board.bubbles[r][c].type === 1)\n          floats.push(this.board.bubbles[r][c]);\n        }\n      }\n    }\n\n    floats.forEach((bubble)=>{\n      let bubb = new Bubble(bubble.x, bubble.y, this.ctx, 1, {r: null, c: null}, bubble.rowShift, bubble.bubbleColor)\n      this.floats.push(bubb);\n      bubble.type = 0;\n    });\n\n  }\n\n\n  findCluster(bubble){\n    let queue = [bubble];\n    let cluster = [];\n    let seen = [];\n    while (queue.length > 0) {\n      let bubb = queue.shift();\n      cluster.push(bubb);\n      seen.push(bubb);\n      let neighbors = this.findNeighbors(bubb);\n      neighbors.forEach((neighbor)=>{\n        if (\n          seen.includes(neighbor) === false\n           ) {\n             queue.push(neighbor);\n           }\n           seen.push(neighbor);\n      });\n    }\n\n    if (cluster.length >= 3){\n      this.score += cluster.length * 100;\n      this.removeCluster(cluster);\n      if (this.clicks >= 3) {\n        this.clicks -= 1;\n      }\n    }\n      this.shotBubble = null;\n      this.reload();\n  }\n\n\n  removeCluster(cluster){\n    cluster.forEach((bubble)=> {\n      if (bubble.type === 1){\n      let bubb = new Bubble(bubble.x, bubble.y, this.ctx, 1, {r:null, c:null}, bubble.rowShift, bubble.bubbleColor);\n        this.cluster.push(bubb);\n      }\n      bubble.type = 0;\n    });\n    setTimeout(()=>{\n      if (this.soundFX === true){\n        const audio = new Audio('./assets/Pop-sound-effect.mp3');\n        audio.volume = 0.4;\n        audio.play();\n      }\n    }, 150);\n  }\n\n\n  getHighScore(){\n    if(this.highscore !== null){\n      if (this.score >= this.highscore) {\n          localStorage.setItem(\"highscore\", this.score);\n          this.highscore = +localStorage.getItem('highscore');\n      }\n    }\n  }\n\n  moveShotBubble(bubble){\n    bubble.x = bubble.x + bubble.speed * Math.cos(this.degToRad(bubble.angle));\n    bubble.y = bubble.y + bubble.speed * -1 * Math.sin(this.degToRad(bubble.angle));\n    if (bubble.x <= 15) {\n      bubble.angle = 180 - bubble.angle;\n    } else if (bubble.x >= this.canvas.width - 15){\n      bubble.angle = 180 - bubble.angle;\n    } else if (bubble.y <= 15) {\n      bubble.y = 15;\n      // need logic to snap bubble into place.\n    }\n  }\n\n  bubbleCollision(bubble){\n    let collisions = [];\n    this.emptyTileCount = 0;\n    for (let r = 0; r < this.board.bubbles.length; r++) {\n      for (let c = 0; c < this.board.bubbles[r].length; c++) {\n\n        if (this.board.bubbles[r][c].type === 0 ){\n          this.emptyTileCount += 1;\n          continue;\n        }\n\n        if (\n          ((this.board.bubbles[r][c].x - bubble.x >= -28 &&\n            this.board.bubbles[r][c].x - bubble.x <= 0)  ||\n          (this.board.bubbles[r][c].x - bubble.x <= 28 &&\n            this.board.bubbles[r][c].x - bubble.x >= 0)) &&\n          ((this.board.bubbles[r][c].y - bubble.y >= -28 &&\n            this.board.bubbles[r][c].y - bubble.y <= 0) ||\n          (this.board.bubbles[r][c].y - bubble.y <= 28 &&\n            this.board.bubbles[r][c].y - bubble.y >= 0))\n      ) {\n\n          collisions.push(\n            {bubble: this.board.bubbles[r][c],\n            xDistAbs: Math.abs(this.board.bubbles[r][c].x - bubble.x),\n           });\n      }\n    }\n  }\n  return collisions;\n}\n\n\n  closestCollision(collisions){\n    let closestBubble;\n    let closestDist = null;\n    collisions.forEach((colBubble)=>{\n      if (closestDist === null ) {\n        closestBubble = colBubble;\n        closestDist = colBubble.xDistAbs;\n      } else if (closestDist > colBubble.xDistAbs) {\n        closestBubble = colBubble;\n        closestDist = colBubble.xDistAbs;\n      }\n    });\n    return closestBubble;\n  }\n\n  availableSpaces(closestBubble){\n\n    let r = closestBubble.bubble.pos.r;\n    let c = closestBubble.bubble.pos.c;\n    let right = this.board.bubbles[r][c + 1];\n    let bottomLeft = this.board.bubbles[r + 1 ][c];\n    let left = this.board.bubbles[r][c - 1];\n    let bottomRight;\n    if (this.board.bubbles[r+1][0].rowShift === false) {\n      bottomRight = this.board.bubbles[r + 1][c + 1];\n    } else {\n        bottomRight = this.board.bubbles[r + 1][c - 1];\n    }\n\n    let possibilities = [ right, bottomRight, bottomLeft, left ];\n    let realPossibilities = [];\n\n    possibilities.forEach((poss)=>{\n      if (poss === undefined) {\n        return null;\n      } else if (poss.type === 0){\n        realPossibilities.push(poss);\n      }\n    });\n    return realPossibilities;\n  }\n\nclosestAvailableSpace(bubble, possibilities){\n\n  if (possibilities.length === 0) {\n    return null;\n  }\n  let closestBubble;\n  let closestDist = null;\n\n\n\n  possibilities.forEach((possSpace)=>{\n    let xDist =  Math.abs(possSpace.x - bubble.x);\n    let yDist =  Math.abs(possSpace.y - bubble.y);\n\n      let dist = xDist + yDist;\n      if (closestDist === null || closestDist > dist) {\n        closestBubble = possSpace;\n        closestDist = dist;\n\n    }\n  });\n\n  if (closestBubble.rowShift === true){\n    bubble.rowShift = true;\n    }\n\n     this.board.bubbles[closestBubble.pos.r][closestBubble.pos.c].bubbleColor = bubble.bubbleColor;\n     this.board.bubbles[closestBubble.pos.r][closestBubble.pos.c].type = 1;\n     this.shotBubble = this.board.bubbles[closestBubble.pos.r][closestBubble.pos.c]\n     // bubble.pos = closestBubble.pos;\n  }\n\n  addRow(){\n      this.board.bubbles.forEach((bubbleRow) => {\n        bubbleRow.forEach((bubble) => {\n          bubble.y = bubble.y + 30;\n          bubble.pos.r += 1;\n        });\n      });\n      this.board.bubbles.unshift(this.board.nextRow);\n      this.clicks = 0;\n      this.board.nextRow = [];\n      this.board.colShift += 1;\n      this.board.loadNextRow();\n\n      this.board.bubbles.pop();\n\n\n\n  }\n\n  win(){\n    for (let c= 0; c < this.board.bubbles[0].length; c++) {\n      if (this.board.bubbles[0][c].type === 1) {\n        return false;\n      }\n    }\n  }\n\n\n  handleGameOverClick(e){\n\n    if (this.lost || this.won) {\n    this.board = new Board(this.canvas, this.ctx);\n    this.shooter = new Shooter(this.canvas, this.ctx);\n    this.score = 0;\n    this.clicks = 0;\n    this.play = true;\n    this.lost = false;\n    this.won = false;\n    }\n  }\n\n  handleClick(e){\n    if (this.play === true) {\n      this.clicks += 1;\n      if (this.shooter.loadedBubbles.length === 2) {\n        this.shotBubble = this.shooter.loadedBubbles[0];\n        if (this.soundFX === true){\n          const audio = new Audio('./assets/pew.mp3');\n          // const audio = new Audio('./assets/pew.ogg');\n          audio.volume = .5;\n          audio.play();\n        }\n        this.shooter.loadedBubbles = this.shooter.loadedBubbles.slice(1);\n      }\n      this.onMouseMove(e);\n    }\n  }\n\n  radToDeg(angle) {\n      return angle * (180 / Math.PI);\n  }\n\n  degToRad(angle) {\n      return angle * (Math.PI / 180);\n  }\n\n  getMousePos(e) {\n      let rect = this.canvas.getBoundingClientRect();\n      return {\n          x: Math.round((e.clientX - rect.left)/\n                        (rect.right - rect.left)*this.canvas.width),\n          y: Math.round((e.clientY - rect.top)/\n                        (rect.bottom - rect.top)*this.canvas.height)\n      };\n  }\n\n  onMouseMove(e) {\n      let pos = this.getMousePos(e);\n      let mouseangle = this.radToDeg(Math.atan2((this.canvas.height - 15) - pos.y, pos.x - ((this.canvas.width/2))));\n\n      if (mouseangle < 0) {\n          mouseangle = 180 + (180 + mouseangle);\n      }\n      const lbound = 8;\n      const ubound = 172;\n      if (mouseangle > 90 && mouseangle < 270) {\n          if (mouseangle > ubound) {\n              mouseangle = ubound;\n          }\n      } else {\n          if (mouseangle < lbound || mouseangle >= 270) {\n              mouseangle = lbound;\n          }\n      }\n\n      this.angle = mouseangle;\n      this.shooter.loadedBubbles[0].angle = mouseangle;\n    }\n\n\n    handleAudioClick (){\n      if (this.sound === true) {\n        this.pauseAudio();\n        this.sound = false;\n      } else {\n        this.playAudio();\n        this.sound = true;\n      }\n    }\n\n    handleFXClick(){\n      const fxToggle = document.getElementById(\"toggleFX\");\n      if (this.soundFX === true) {\n        this.soundFX = false;\n        fxToggle.className = \"fa fa-volume-off fa-2x\";\n      } else {\n        this.soundFX = true;\n        fxToggle.className = \"fa fa-volume-up fa-2x\";\n      }\n    }\n\n    pauseAudio(){\n      const soundToggle = document.getElementById(\"toggleSound\");\n      soundToggle.className = \"fa fa-volume-off fa-2x\";\n      const audio = document.getElementById(\"myAudio\");\n      audio.pause();\n    }\n\n    playAudio(){\n      const soundToggle = document.getElementById(\"toggleSound\");\n      soundToggle.className = \"fa fa-volume-up fa-2x\";\n      const audio = document.getElementById(\"myAudio\");\n      audio.play();\n    }\n  }\n\n\n\nexport default Game;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/game.js","import Bubble from './bubble';\nimport Shooter from './shooter';\n\nconst BOARDOPTIONS = {\n  bubbleWidth:30,\n  bubbleHeight: 28,\n  offsetTop: 30,\n  rowCount: 6,\n  nullRowCount: 23,\n  columnCount: 16\n};\n\nclass Board{\n  constructor(canvas, ctx){\n    this.ctx = ctx;\n    this.canvas = canvas;\n    this.bubbles = this.createBubbles();\n    this.nextRow = [];\n    this.colShift = 1;\n    this.loadNextRow();\n\n  }\n\n  loadNextRow(){\n    let bubbleX;\n    if (this.nextRow.length !== BOARDOPTIONS.columnCount) {\n      for (let c = 0; c < BOARDOPTIONS.columnCount; c++) {\n        if ( this.colShift % 2 !== 0) {\n          bubbleX = (c * BOARDOPTIONS.bubbleWidth+15) + 15;\n          this.nextRow.push(new Bubble(bubbleX, 15, this.ctx , 1, {r: 0,c: c}, true));\n        } else {\n          bubbleX = (c * 30) + 15;\n          this.nextRow.push(new Bubble(bubbleX, 15, this.ctx , 1, {r: 0,c: c}, false));\n        }\n      }\n    }\n  }\n\n\n  createBubbles (){\n    let bubbles = [];\n    for (let r = 0; r < BOARDOPTIONS.nullRowCount; r++) {\n      bubbles.push([]);\n      for (let c = 0; c < BOARDOPTIONS.columnCount; c++) {\n        let bubbleX;\n        let bubbleY;\n        if ( r % 2 === 0 ) {\n          bubbleX = (c * BOARDOPTIONS.bubbleWidth) + 15;\n          bubbleY = (r * BOARDOPTIONS.bubbleHeight) + 15;\n        } else {\n          bubbleX = (c * BOARDOPTIONS.bubbleWidth+15) + 15;\n          bubbleY = (r * BOARDOPTIONS.bubbleHeight) + 15;\n        }\n\n        if ( r <BOARDOPTIONS.rowCount ) {\n          let bubble =  new Bubble(bubbleX, bubbleY, this.ctx, 1, {c: c, r: r});\n          if (r % 2 !== 0){\n            bubble.rowShift = true;\n          }\n          bubbles[r].push(bubble);\n        } else {\n          let bubble =  new Bubble(bubbleX, bubbleY, this.ctx, 0, {c: c, r: r});\n          bubbles[r].push(bubble);\n          if (r % 2 !== 0){\n            bubble.rowShift = true;\n          }\n        }\n\n      }\n    }\n\n\n    return bubbles;\n  }\n\n  drawBoard(){\n    for ( let r=0; r < this.bubbles.length; r++ ) {\n    for ( let c=0; c < this.bubbles[r].length; c++ ) {\n        this.bubbles[r][c].drawBubble();\n      }\n    }\n  }\n}\n\nexport default Board;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/board.js"],"sourceRoot":""}